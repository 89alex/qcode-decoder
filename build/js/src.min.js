function QRCodeDecoder(){this.tmrCapture=null,this.canvasElem=null}QRCodeDecoder.prototype.prepareCanvas=function(e,t,o){return t&&o&&(e.style.width=t+"px",e.style.height=o+"px",e.width=t,e.height=o),qrcode.setCanvasElement(e),this.canvasElem=e,e},QRCodeDecoder.prototype._captureToCanvas=function(){var e=this;this.tmrCapture&&clearTimeout(this.tmrCapture);var t=this.canvasElem.getContext("2d");t.clearRect(0,0,this.canvasElem.width,this.canvasElem.height);try{t.drawImage(this.videoElem,0,0);try{qrcode.decode()}catch(o){console.log(o),this.tmrCapture=setTimeout(function(){e._captureToCanvas.apply(e,null)},500)}}catch(o){console.log(o),this.tmrCapture=setTimeout(function(){e._captureToCanvas.apply(e,null)},500)}},QRCodeDecoder.prototype.hasGetUserMedia=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},QRCodeDecoder.prototype.isCanvasSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},QRCodeDecoder.prototype.prepareVideo=function(e,t){var o=this;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({video:!0,audio:!1},function(t){e.src=window.URL.createObjectURL(t),o.videoElem=e,o.stream=t,setTimeout(function(){o._captureToCanvas.apply(o,null)},500)},t):console.log("Couldn't get video from camera"),setTimeout(function(){o._captureToCanvas.apply(o,null)},500)},QRCodeDecoder.prototype.releaseVideo=function(){this.stream.stop()},QRCodeDecoder.prototype.setDecoderCallback=function(e){qrcode.callback=e},QRCodeDecoder.prototype.decodeFromSrc=function(e){qrcode.decode(e)};