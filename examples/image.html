<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QCodeDecoder - Image</title>
</head>
<body>

  <h1>QCode Decoder also decodes directly from an image</h1>

  <img src="./qrcode.png" alt="qr code">
  <button id="decode">Decode!</button>

  <script src="../build/qcode-decoder.min.js"></script>
  <script>

  var qr = new QRCodeDecoder();

  if (!(qr.isCanvasSupported() && qr.hasGetUserMedia())) {
    alert('Your browser doesn\'t match the required specs.');
    throw new Error('Canvas and getUserMedia are required');
  }

  var btn = document.querySelector('button#decode');
  var img = document.querySelector('img');
  var canvas = document.querySelector('canvas');

  // prepare a canvas element that will receive
  // the image to decode, sets the callback for
  // the result and then prepares the
  // videoElement to send its source to the
  // decoder.

  qr.prepareCanvas(canvas, 800,600)
    .setDecoderCallback(function (result) {
      alert(result);
    })
    .prepareImage(img, function (err) {
      console.error(err);
    });

  </script>
</body>
</html>
